<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GainMax - Inscription</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-md">
    <h2 class="text-2xl font-bold text-center text-blue-900 mb-6">Inscription GainMax</h2>

    <input id="name" type="text" placeholder="Nom"
      class="w-full mb-3 p-2 border rounded" />

    <input id="email" type="email" placeholder="Email"
      class="w-full mb-3 p-2 border rounded" />

    <input id="password" type="password" placeholder="Mot de passe"
      class="w-full mb-3 p-2 border rounded" />

    <input id="referral" type="text" placeholder="Code parrain (optionnel)"
      class="w-full mb-4 p-2 border rounded" />

    <button onclick="signUp()"
      class="w-full bg-blue-900 text-white py-2 rounded hover:bg-blue-600">
      S'inscrire
    </button>

    <p class="text-center mt-4">
      Déjà inscrit ?
      <a href="login.html" class="text-blue-700 font-semibold">Se connecter</a>
    </p>

    <p id="message" class="text-center mt-4 text-sm"></p>
  </div>

<script>

  const supabaseUrl = "https://iumxpxrkeimkvetqjuzh.supabase.co";
  const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml1bXhweHJrZWlta3ZldHFqdXpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3MDA5NjQsImV4cCI6MjA4NzI3Njk2NH0.ggjE7SBq20EZafLoD7PWTE-UJTxD-hTZoRcF2Bbr6pI";
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  async function signUp() {

    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const referral = document.getElementById("referral").value;

    const { data, error } = await supabase.auth.signUp({
      email: email,
      password: password
    });

    if (error) {
      document.getElementById("message").innerText = error.message;
      return;
    }

    document.getElementById("message").innerText =
      "Inscription réussie ! Vérifiez votre email.";

  }

</script>

</body>
</html>